{{/* Used to render the list of posts on the index page. */}}
<html>
  <head>
    {{ partial "head.html" . }}
    <link rel='stylesheet' href='/index.css'>
  </head>
  <body>
    <header>
      <h1>{{ .Site.Title }}</h1>
      <a href='mailto:mail@ar.al'><img class='email' src='/icons/email.svg' alt='Email Aral'></a>
      <a href='https://mastodon.ar.al'><img class='mastodon' src='/icons/mastodon.svg' alt='Aralâ€™s Mastodon'></a>
      <a href='index.xml'><img class='rss' src='/icons/rss.svg' alt='RSS feed'></a>
      <a href='dat://live.ar.al'><img class='p2p' src='/icons/mesh.svg' alt='Peer Web (DAT) version'></a>
    </header>

    {{ .Content }}

    <!-- Group by year. -->
    {{ range .Data.Pages.GroupByDate "2006" }}
    <h2>{{ .Key }}</h2>

      <!-- Group by month. -->
      {{ range .Pages.GroupByDate "January" }}
      <h3>{{ .Key }}</h3>

        <!-- Orders content according to the "date" field in front matter. -->
        {{ range .Pages.GroupByDate "02" }}
        <h4 class='postdate date'>{{ .Key }}</h4>
        <ul> 
          {{ range $index, $post := .Pages }}
            <li>
              <time datetime="{{ $post.Date.Format "2006-01-02T15:04:05Z0700" }}">
                <span class='postdate day item-{{ $index }}'>{{ $post.Date.Format "Mon" }}</span>
              </time>
              <span class='postdate'>{{ $post.Date.Format "15:04" }}</span>
              <a href="{{ .RelPermalink }}">{{ $post.Title }}</a>
            </li>
          {{ end }}
        </ul>
      {{ end }}
    {{ end }}
  {{ end }}

  <p>For earlier posts, please see <a href='https://ar.al'>the previous version of this site.</a></p>

  {{ partial "footer.html" . }}
  </body>
</html>
